@OPENAI_API_KEY={{$dotenv OPENAI_API_KEY}}
@targetName=luecke-1
@antwort=Meine Antwort
@musterloesung=Beispielhafte Lehrerlösung
@lueckentext=Kompletten Lückentext (mit sichtbaren Lücken oder bereits eingetragenen Antworten) hier einfügen.
@BASE_URL={{$dotenv BACKEND_BASE_URL}}

### ChatGPT-Bewertung wie im Frontend
POST https://api.openai.com/v1/chat/completions
Authorization: Bearer {{OPENAI_API_KEY}}
Content-Type: application/json

{
  "model": "gpt-4.1-mini",
  "messages": [
    {
      "role": "system",
      "content": "Du bist eine Lehrperson für Politik und Geschichte. Du bewertest kurze Antworten von Lernenden zu einem Lückentext sachlich korrekt, freundlich und knapp auf Deutsch. Du kennst eine Lehrerlösung, verwendest sie als zentrale fachliche Referenz, verrätst sie aber nie wörtlich. Antworten, die inhaltlich sehr nahe an der Lehrerlösung sind, sollen klar als richtig bewertet werden. Entscheidend ist gleichzeitig, ob die Antwort im Kontext des Lückentextes inhaltlich korrekt ist – auch andere richtige Lösungen, Umschreibungen oder Synonyme können als richtig gelten. Bewerte bewusst tolerant: Ignoriere kleine sprachliche Unterschiede wie Artikel, Präpositionen, Flexionen oder Satzzeichen. Du gibst nur eine grobe Einschätzung (richtig/teilweise richtig/falsch) und kurze Hinweise oder Denkanstösse. Wenn du RICHTIG schreibst, soll die Rückmeldung kurz positiv sein und idealerweise einen ganz kurzen inhaltlichen Hinweis zur Lösung geben (z.B. welches historische Ereignis oder welcher Begriff gemeint ist). Antworte IMMER in genau diesem Format: Erste Zeile NUR eines dieser Wörter in Grossbuchstaben: RICHTIG, TEILWEISE oder FALSCH. Zweite Zeile eine sehr kurze Rückmeldung (maximal 2 Sätze)."
    },
    {
      "role": "user",
      "content": "Hier ist der komplette Lückentext (mit den aktuell eingetragenen Antworten):\n\n{{lueckentext}}\n\nZu prüfende Lücke: {{targetName}}.\nAntwort der Schülerin / des Schülers in dieser Lücke: \"{{antwort}}\".\n\nLehrerlösung für diese Lücke (nur zur internen groben Orientierung, nicht wörtlich wiedergeben): \"{{musterloesung}}\".\n\nBeurteile knapp, ob die Antwort im Kontext des gesamten Lückentextes inhaltlich korrekt ist. Nutze die Lehrerlösung nur als Orientierung und akzeptiere auch andere richtige Formulierungen oder zusätzliche passende Informationen. Gib eine kurze Rückmeldung mit maximal einem Hinweis oder Tipp. Nenne nicht die exakte Lösung und formuliere keine vollständige Musterantwort."
    }
  ]
}

### Backend Startseite aufrufen
GET {{BASE_URL}}

### Antwort-Route testen
POST {{BASE_URL}}answer
Content-Type: application/json

{
  "key": "a3",
  "sheet": "index55",
  "user": "xyz",
  "value": "Testwert"
}

### Antworten nach Sheet filtern
GET {{BASE_URL}}answer//index.html

### Antworten nach Sheet und User filtern
GET {{BASE_URL}}answer//index.html/dummywert

### Antworten per Query-Param sheet/user filtern
GET {{BASE_URL}}answer?sheet=index.html&user=dummywert
